<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üî∑ Interactive Parallelogram Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #007acc 0%, #005299 100%);
            color: #ffffff;
            font-family: 'Segoe UI', 'SF Pro Display', -apple-system, sans-serif;
            min-height: 100vh;
        }

        .calculator-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            font-size: 2.5rem;
            color: #ffffff;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            margin-bottom: 10px;
        }

        .header .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            color: #ff8c00;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .visualization-panel {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .controls-panel {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .shape-canvas {
            width: 100%;
            height: 400px;
            border: 2px solid #ddd;
            border-radius: 12px;
            background: linear-gradient(45deg, #f8f9fa 25%, transparent 25%, transparent 75%, #f8f9fa 75%),
                        linear-gradient(45deg, #f8f9fa 25%, transparent 25%, transparent 75%, #f8f9fa 75%);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            position: relative;
            margin-bottom: 20px;
        }

        .shape-selector {
            margin-bottom: 25px;
        }

        .shape-selector h3 {
            margin-bottom: 15px;
            color: #ffffff;
            font-size: 1.3rem;
        }

        .shape-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .shape-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: #ffffff;
            padding: 15px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 600;
            text-align: center;
        }

        .shape-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .shape-btn.active {
            background: #ff8c00;
            border-color: #ff8c00;
            color: #ffffff;
            box-shadow: 0 4px 15px rgba(255, 140, 0, 0.4);
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #ffffff;
        }

        .input-control {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .input-control input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            font-size: 16px;
        }

        .input-control input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .input-control input:focus {
            outline: none;
            border-color: #ff8c00;
            box-shadow: 0 0 0 3px rgba(255, 140, 0, 0.2);
        }

        .slider-control {
            flex: 1;
        }

        .slider-control input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.3);
            outline: none;
            -webkit-appearance: none;
        }

        .slider-control input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #ff8c00;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        .value-display {
            min-width: 80px;
            text-align: center;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: 600;
        }

        .calculations-panel {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 25px;
            margin-top: 20px;
            backdrop-filter: blur(10px);
        }

        .calculations-panel h3 {
            margin-bottom: 20px;
            color: #ffffff;
            font-size: 1.4rem;
        }

        .calc-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .calc-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            border-left: 4px solid #ff8c00;
        }

        .calc-label {
            font-weight: 600;
            color: #ffffff;
        }

        .calc-value {
            font-weight: 700;
            color: #ff8c00;
            font-size: 1.1rem;
        }

        .formula-display {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            font-family: 'Consolas', monospace;
            font-size: 14px;
            color: #ffffff;
            border-left: 4px solid #00cc66;
        }

        .properties-panel {
            grid-column: span 2;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }

        .properties-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .property-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .property-card.active {
            border-color: #00cc66;
            background: rgba(0, 204, 102, 0.1);
        }

        .property-icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
        }

        .property-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #ffffff;
        }

        .property-description {
            font-size: 0.9rem;
            opacity: 0.8;
            color: #ffffff;
        }

        .educational-content {
            grid-column: span 2;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            margin-top: 20px;
        }

        .tutorial-tabs {
            display: flex;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 25px;
        }

        .tutorial-tab {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            padding: 12px 20px;
            cursor: pointer;
            font-size: 14px;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
        }

        .tutorial-tab.active {
            color: #ff8c00;
            border-bottom-color: #ff8c00;
        }

        .tutorial-content {
            display: none;
            color: #ffffff;
            line-height: 1.6;
        }

        .tutorial-content.active {
            display: block;
        }

        .tutorial-step {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border-left: 4px solid #00cc66;
        }

        .step-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: #00cc66;
            color: #ffffff;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: 600;
            margin-right: 12px;
        }

        /* SVG Shape Styles */
        .parallelogram-shape {
            fill: rgba(0, 122, 204, 0.3);
            stroke: #007acc;
            stroke-width: 3;
        }

        .rhombus-shape {
            fill: rgba(255, 140, 0, 0.3);
            stroke: #ff8c00;
            stroke-width: 3;
        }

        .rectangle-shape {
            fill: rgba(0, 204, 102, 0.3);
            stroke: #00cc66;
            stroke-width: 3;
        }

        .square-shape {
            fill: rgba(204, 0, 102, 0.3);
            stroke: #cc0066;
            stroke-width: 3;
        }

        .vertex-point {
            fill: #ffffff;
            stroke: #333;
            stroke-width: 2;
            cursor: pointer;
        }

        .vertex-point:hover {
            fill: #ff8c00;
        }

        .measurement-line {
            stroke: #333;
            stroke-width: 1;
            stroke-dasharray: 5,5;
        }

        .measurement-text {
            fill: #333;
            font-size: 12px;
            font-weight: 600;
            text-anchor: middle;
        }

        .angle-arc {
            fill: none;
            stroke: #ff8c00;
            stroke-width: 2;
        }

        .angle-text {
            fill: #ff8c00;
            font-size: 11px;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="calculator-container">
        <div class="header">
            <h1>üî∑ Interactive Parallelogram Calculator</h1>
            <p class="subtitle">Explore the relationships between parallelograms, rhombuses, rectangles, and squares</p>
        </div>

        <div class="main-grid">
            <div class="visualization-panel">
                <h3>üìê Dynamic Shape Visualization</h3>
                <div class="shape-canvas">
                    <svg id="shape-svg" width="100%" height="400" viewBox="0 0 500 400">
                        <!-- Interactive parallelogram will be drawn here -->
                        <g id="shape-group">
                            <!-- Shape path -->
                            <path id="shape-path" class="parallelogram-shape" d="M100,300 L250,300 L350,150 L200,150 Z" />

                            <!-- Vertex points -->
                            <circle class="vertex-point" cx="100" cy="300" r="6" data-vertex="A" />
                            <circle class="vertex-point" cx="250" cy="300" r="6" data-vertex="B" />
                            <circle class="vertex-point" cx="350" cy="150" r="6" data-vertex="C" />
                            <circle class="vertex-point" cx="200" cy="150" r="6" data-vertex="D" />

                            <!-- Vertex labels -->
                            <text class="measurement-text" x="90" y="295" fill="#333">A</text>
                            <text class="measurement-text" x="260" y="295" fill="#333">B</text>
                            <text class="measurement-text" x="360" y="145" fill="#333">C</text>
                            <text class="measurement-text" x="190" y="145" fill="#333">D</text>

                            <!-- Measurement lines and labels -->
                            <g id="measurements-group">
                                <!-- Base measurement -->
                                <line class="measurement-line" x1="100" y1="320" x2="250" y2="320" />
                                <text class="measurement-text" x="175" y="335" id="base-label">150</text>

                                <!-- Height measurement -->
                                <line class="measurement-line" x1="80" y1="300" x2="80" y2="150" />
                                <text class="measurement-text" x="70" y="230" id="height-label">150</text>

                                <!-- Side measurement -->
                                <line class="measurement-line" x1="260" y1="290" x2="360" y2="140" />
                                <text class="measurement-text" x="310" y="210" id="side-label">180</text>
                            </g>

                            <!-- Angle indicators -->
                            <g id="angles-group">
                                <path class="angle-arc" d="M 120,300 A 20,20 0 0,0 130,285" />
                                <text class="angle-text" x="135" y="285" id="angle-label">60¬∞</text>
                            </g>
                        </g>
                    </svg>
                </div>

                <div class="calculations-panel">
                    <h3>üìä Real-time Calculations</h3>
                    <div class="calc-grid">
                        <div class="calc-item">
                            <span class="calc-label">Area:</span>
                            <span class="calc-value" id="area-value">22,500</span>
                        </div>
                        <div class="calc-item">
                            <span class="calc-label">Perimeter:</span>
                            <span class="calc-value" id="perimeter-value">660</span>
                        </div>
                        <div class="calc-item">
                            <span class="calc-label">Diagonal 1:</span>
                            <span class="calc-value" id="diagonal1-value">270.8</span>
                        </div>
                        <div class="calc-item">
                            <span class="calc-label">Diagonal 2:</span>
                            <span class="calc-value" id="diagonal2-value">180.3</span>
                        </div>
                    </div>
                    <div class="formula-display" id="formula-display">
                        <strong>Current Formula:</strong> Area = base √ó height = 150 √ó 150 = 22,500
                    </div>
                </div>
            </div>

            <div class="controls-panel">
                <div class="shape-selector">
                    <h3>üéØ Shape Type</h3>
                    <div class="shape-buttons">
                        <button class="shape-btn active" data-shape="parallelogram">üî∑ Parallelogram</button>
                        <button class="shape-btn" data-shape="rhombus">üî∂ Rhombus</button>
                        <button class="shape-btn" data-shape="rectangle">üü© Rectangle</button>
                        <button class="shape-btn" data-shape="square">üü¶ Square</button>
                    </div>
                </div>

                <div class="input-group">
                    <label>Base Length</label>
                    <div class="input-control">
                        <div class="slider-control">
                            <input type="range" id="base-slider" min="50" max="300" value="150">
                        </div>
                        <input type="number" id="base-input" value="150" min="1">
                        <div class="value-display" id="base-display">150</div>
                    </div>
                </div>

                <div class="input-group">
                    <label>Height</label>
                    <div class="input-control">
                        <div class="slider-control">
                            <input type="range" id="height-slider" min="50" max="250" value="150">
                        </div>
                        <input type="number" id="height-input" value="150" min="1">
                        <div class="value-display" id="height-display">150</div>
                    </div>
                </div>

                <div class="input-group">
                    <label>Side Length</label>
                    <div class="input-control">
                        <div class="slider-control">
                            <input type="range" id="side-slider" min="50" max="300" value="180">
                        </div>
                        <input type="number" id="side-input" value="180" min="1">
                        <div class="value-display" id="side-display">180</div>
                    </div>
                </div>

                <div class="input-group">
                    <label>Angle (degrees)</label>
                    <div class="input-control">
                        <div class="slider-control">
                            <input type="range" id="angle-slider" min="30" max="150" value="60">
                        </div>
                        <input type="number" id="angle-input" value="60" min="1" max="179">
                        <div class="value-display" id="angle-display">60¬∞</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="properties-panel">
            <h3>‚ú® Shape Properties</h3>
            <p>Understand the unique characteristics of each parallelogram type</p>
            <div class="properties-grid">
                <div class="property-card active" id="prop-opposite-sides">
                    <div class="property-icon">‚ÜîÔ∏è</div>
                    <div class="property-title">Opposite Sides Parallel</div>
                    <div class="property-description">Opposite sides are always parallel and equal in length</div>
                </div>

                <div class="property-card active" id="prop-opposite-angles">
                    <div class="property-icon">üìê</div>
                    <div class="property-title">Opposite Angles Equal</div>
                    <div class="property-description">Opposite angles are equal, consecutive angles are supplementary</div>
                </div>

                <div class="property-card active" id="prop-diagonals">
                    <div class="property-icon">‚úÇÔ∏è</div>
                    <div class="property-title">Diagonals Bisect</div>
                    <div class="property-description">Diagonals bisect each other at their intersection point</div>
                </div>

                <div class="property-card" id="prop-right-angles">
                    <div class="property-icon">‚üÇ</div>
                    <div class="property-title">Right Angles</div>
                    <div class="property-description">All angles are 90¬∞ (rectangles and squares only)</div>
                </div>

                <div class="property-card" id="prop-equal-sides">
                    <div class="property-icon">üìè</div>
                    <div class="property-title">All Sides Equal</div>
                    <div class="property-description">All sides have the same length (rhombus and square only)</div>
                </div>

                <div class="property-card" id="prop-equal-diagonals">
                    <div class="property-icon">‚ö°</div>
                    <div class="property-title">Equal Diagonals</div>
                    <div class="property-description">Both diagonals have the same length (rectangles and squares only)</div>
                </div>
            </div>
        </div>

        <div class="educational-content">
            <h3>üìö Interactive Learning Modules</h3>

            <div class="tutorial-tabs">
                <button class="tutorial-tab active" data-tab="properties">Properties</button>
                <button class="tutorial-tab" data-tab="formulas">Formulas</button>
                <button class="tutorial-tab" data-tab="examples">Examples</button>
                <button class="tutorial-tab" data-tab="practice">Practice</button>
            </div>

            <div class="tutorial-content active" id="properties-content">
                <div class="tutorial-step">
                    <span class="step-number">1</span>
                    <strong>Understanding Parallelograms:</strong> A parallelogram is a quadrilateral with opposite sides parallel. This fundamental property leads to many other interesting characteristics.
                </div>
                <div class="tutorial-step">
                    <span class="step-number">2</span>
                    <strong>Special Cases:</strong> Rectangles, rhombuses, and squares are all special types of parallelograms with additional properties that make them unique.
                </div>
                <div class="tutorial-step">
                    <span class="step-number">3</span>
                    <strong>Hierarchy Relationship:</strong> Square ‚äÇ Rectangle ‚äÇ Parallelogram and Square ‚äÇ Rhombus ‚äÇ Parallelogram
                </div>
            </div>

            <div class="tutorial-content" id="formulas-content">
                <div class="tutorial-step">
                    <span class="step-number">1</span>
                    <strong>Area Calculation:</strong> For any parallelogram, Area = base √ó height. This works regardless of the angle between sides.
                </div>
                <div class="tutorial-step">
                    <span class="step-number">2</span>
                    <strong>Perimeter Formula:</strong> Perimeter = 2(a + b) where a and b are the lengths of adjacent sides.
                </div>
                <div class="tutorial-step">
                    <span class="step-number">3</span>
                    <strong>Diagonal Formulas:</strong> Using the law of cosines to find diagonal lengths in terms of sides and angles.
                </div>
            </div>

            <div class="tutorial-content" id="examples-content">
                <div class="tutorial-step">
                    <span class="step-number">1</span>
                    <strong>Real-World Example:</strong> A parallelogram-shaped garden plot with base 20m and height 15m has an area of 300 square meters.
                </div>
                <div class="tutorial-step">
                    <span class="step-number">2</span>
                    <strong>Architecture:</strong> Many buildings use parallelogram shapes for aesthetic and structural reasons.
                </div>
            </div>

            <div class="tutorial-content" id="practice-content">
                <div class="tutorial-step">
                    <span class="step-number">1</span>
                    <strong>Interactive Challenge:</strong> Try adjusting the sliders to create a rectangle. What happens to the properties?
                </div>
                <div class="tutorial-step">
                    <span class="step-number">2</span>
                    <strong>Calculation Practice:</strong> Set the base to 100 and height to 80. Calculate the area manually, then verify with the calculator.
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        class ParallelogramCalculator {
            constructor() {
                this.currentShape = 'parallelogram';
                this.isDragging = false;
                this.dragVertex = null;

                this.values = {
                    base: 150,
                    height: 150,
                    side: 180,
                    angle: 60
                };

                this.initializeEventListeners();
                this.updateVisualization();
                this.updateCalculations();
            }

            initializeEventListeners() {
                // Shape selection
                document.querySelectorAll('.shape-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.shape-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.currentShape = e.target.dataset.shape;
                        this.updateShapeConstraints();
                        this.updateVisualization();
                        this.updateCalculations();
                        this.updateProperties();
                    });
                });

                // Input controls
                this.setupInputControl('base');
                this.setupInputControl('height');
                this.setupInputControl('side');
                this.setupInputControl('angle');

                // Tutorial tabs
                document.querySelectorAll('.tutorial-tab').forEach(tab => {
                    tab.addEventListener('click', (e) => {
                        this.switchTutorialTab(e.target.dataset.tab);
                    });
                });

                // Vertex dragging
                document.querySelectorAll('.vertex-point').forEach(vertex => {
                    vertex.addEventListener('mousedown', (e) => {
                        this.startDragging(e.target.dataset.vertex, e);
                    });
                });

                document.addEventListener('mousemove', (e) => {
                    if (this.isDragging) {
                        this.handleDrag(e);
                    }
                });

                document.addEventListener('mouseup', () => {
                    this.stopDragging();
                });
            }

            setupInputControl(type) {
                const slider = document.getElementById(`${type}-slider`);
                const input = document.getElementById(`${type}-input`);
                const display = document.getElementById(`${type}-display`);

                const updateValue = (value) => {
                    this.values[type] = parseFloat(value);
                    slider.value = value;
                    input.value = value;
                    display.textContent = type === 'angle' ? `${value}¬∞` : value;
                    this.updateVisualization();
                    this.updateCalculations();
                };

                slider.addEventListener('input', (e) => updateValue(e.target.value));
                input.addEventListener('input', (e) => updateValue(e.target.value));
            }

            updateShapeConstraints() {
                const angleSlider = document.getElementById('angle-slider');
                const angleInput = document.getElementById('angle-input');

                switch (this.currentShape) {
                    case 'rectangle':
                        this.values.angle = 90;
                        angleSlider.disabled = true;
                        angleInput.disabled = true;
                        break;
                    case 'square':
                        this.values.angle = 90;
                        this.values.side = this.values.base;
                        angleSlider.disabled = true;
                        angleInput.disabled = true;
                        document.getElementById('side-slider').disabled = true;
                        document.getElementById('side-input').disabled = true;
                        break;
                    case 'rhombus':
                        this.values.side = this.values.base;
                        document.getElementById('side-slider').disabled = true;
                        document.getElementById('side-input').disabled = true;
                        angleSlider.disabled = false;
                        angleInput.disabled = false;
                        break;
                    default: // parallelogram
                        angleSlider.disabled = false;
                        angleInput.disabled = false;
                        document.getElementById('side-slider').disabled = false;
                        document.getElementById('side-input').disabled = false;
                }

                this.updateInputDisplays();
            }

            updateInputDisplays() {
                document.getElementById('base-slider').value = this.values.base;
                document.getElementById('base-input').value = this.values.base;
                document.getElementById('base-display').textContent = this.values.base;

                document.getElementById('height-slider').value = this.values.height;
                document.getElementById('height-input').value = this.values.height;
                document.getElementById('height-display').textContent = this.values.height;

                document.getElementById('side-slider').value = this.values.side;
                document.getElementById('side-input').value = this.values.side;
                document.getElementById('side-display').textContent = this.values.side;

                document.getElementById('angle-slider').value = this.values.angle;
                document.getElementById('angle-input').value = this.values.angle;
                document.getElementById('angle-display').textContent = `${this.values.angle}¬∞`;
            }

            updateVisualization() {
                const { base, height, side, angle } = this.values;
                const svg = document.getElementById('shape-svg');
                const shapePath = document.getElementById('shape-path');

                // Calculate vertex positions
                const centerX = 250;
                const centerY = 200;
                const angleRad = (angle * Math.PI) / 180;

                const offsetX = Math.cos(angleRad) * side;
                const offsetY = Math.sin(angleRad) * side;

                const vertices = {
                    A: { x: centerX - base/2, y: centerY + height/2 },
                    B: { x: centerX + base/2, y: centerY + height/2 },
                    C: { x: centerX + base/2 + offsetX, y: centerY - height/2 },
                    D: { x: centerX - base/2 + offsetX, y: centerY - height/2 }
                };

                // Update shape path
                const pathData = `M${vertices.A.x},${vertices.A.y} L${vertices.B.x},${vertices.B.y} L${vertices.C.x},${vertices.C.y} L${vertices.D.x},${vertices.D.y} Z`;
                shapePath.setAttribute('d', pathData);

                // Update shape class
                shapePath.className = `${this.currentShape}-shape`;

                // Update vertex positions
                document.querySelector('[data-vertex="A"]').setAttribute('cx', vertices.A.x);
                document.querySelector('[data-vertex="A"]').setAttribute('cy', vertices.A.y);
                document.querySelector('[data-vertex="B"]').setAttribute('cx', vertices.B.x);
                document.querySelector('[data-vertex="B"]').setAttribute('cy', vertices.B.y);
                document.querySelector('[data-vertex="C"]').setAttribute('cx', vertices.C.x);
                document.querySelector('[data-vertex="C"]').setAttribute('cy', vertices.C.y);
                document.querySelector('[data-vertex="D"]').setAttribute('cx', vertices.D.x);
                document.querySelector('[data-vertex="D"]').setAttribute('cy', vertices.D.y);

                // Update vertex labels
                const labels = document.querySelectorAll('.measurement-text');
                labels[0].setAttribute('x', vertices.A.x - 10);
                labels[0].setAttribute('y', vertices.A.y - 5);
                labels[1].setAttribute('x', vertices.B.x + 10);
                labels[1].setAttribute('y', vertices.B.y - 5);
                labels[2].setAttribute('x', vertices.C.x + 10);
                labels[2].setAttribute('y', vertices.C.y - 5);
                labels[3].setAttribute('x', vertices.D.x - 10);
                labels[3].setAttribute('y', vertices.D.y - 5);

                // Update measurement lines
                this.updateMeasurements(vertices);
            }

            updateMeasurements(vertices) {
                const measurementLines = document.querySelectorAll('.measurement-line');

                // Base measurement
                measurementLines[0].setAttribute('x1', vertices.A.x);
                measurementLines[0].setAttribute('y1', vertices.A.y + 20);
                measurementLines[0].setAttribute('x2', vertices.B.x);
                measurementLines[0].setAttribute('y2', vertices.B.y + 20);

                document.getElementById('base-label').setAttribute('x', (vertices.A.x + vertices.B.x) / 2);
                document.getElementById('base-label').setAttribute('y', vertices.A.y + 35);
                document.getElementById('base-label').textContent = this.values.base;

                // Height measurement
                measurementLines[1].setAttribute('x1', vertices.A.x - 20);
                measurementLines[1].setAttribute('y1', vertices.A.y);
                measurementLines[1].setAttribute('x2', vertices.D.x - 20);
                measurementLines[1].setAttribute('y2', vertices.D.y);

                document.getElementById('height-label').setAttribute('x', vertices.A.x - 30);
                document.getElementById('height-label').setAttribute('y', (vertices.A.y + vertices.D.y) / 2);
                document.getElementById('height-label').textContent = this.values.height;

                // Side measurement
                measurementLines[2].setAttribute('x1', vertices.B.x + 10);
                measurementLines[2].setAttribute('y1', vertices.B.y - 10);
                measurementLines[2].setAttribute('x2', vertices.C.x + 10);
                measurementLines[2].setAttribute('y2', vertices.C.y - 10);

                document.getElementById('side-label').setAttribute('x', (vertices.B.x + vertices.C.x) / 2 + 15);
                document.getElementById('side-label').setAttribute('y', (vertices.B.y + vertices.C.y) / 2 - 5);
                document.getElementById('side-label').textContent = this.values.side;

                // Angle measurement
                document.getElementById('angle-label').textContent = `${this.values.angle}¬∞`;
            }

            updateCalculations() {
                const { base, height, side, angle } = this.values;

                // Calculate area
                const area = base * height;

                // Calculate perimeter
                const perimeter = 2 * (base + side);

                // Calculate diagonals using law of cosines
                const angleRad = (angle * Math.PI) / 180;
                const diagonal1 = Math.sqrt(base * base + side * side - 2 * base * side * Math.cos(angleRad));
                const diagonal2 = Math.sqrt(base * base + side * side - 2 * base * side * Math.cos(Math.PI - angleRad));

                // Update display
                document.getElementById('area-value').textContent = area.toLocaleString();
                document.getElementById('perimeter-value').textContent = perimeter.toFixed(1);
                document.getElementById('diagonal1-value').textContent = diagonal1.toFixed(1);
                document.getElementById('diagonal2-value').textContent = diagonal2.toFixed(1);

                // Update formula display
                this.updateFormulaDisplay(area, perimeter);
            }

            updateFormulaDisplay(area, perimeter) {
                const formulaDisplay = document.getElementById('formula-display');
                const { base, height, side, angle } = this.values;

                let formula = '';
                switch (this.currentShape) {
                    case 'parallelogram':
                        formula = `<strong>Parallelogram:</strong> Area = base √ó height = ${base} √ó ${height} = ${area}`;
                        break;
                    case 'rectangle':
                        formula = `<strong>Rectangle:</strong> Area = length √ó width = ${base} √ó ${height} = ${area}`;
                        break;
                    case 'rhombus':
                        formula = `<strong>Rhombus:</strong> Area = base √ó height = ${base} √ó ${height} = ${area}`;
                        break;
                    case 'square':
                        formula = `<strong>Square:</strong> Area = side¬≤ = ${base}¬≤ = ${area}`;
                        break;
                }

                formulaDisplay.innerHTML = formula;
            }

            updateProperties() {
                // Reset all property cards
                document.querySelectorAll('.property-card').forEach(card => {
                    card.classList.remove('active');
                });

                // Activate relevant properties based on shape
                const activeProps = ['prop-opposite-sides', 'prop-opposite-angles', 'prop-diagonals'];

                switch (this.currentShape) {
                    case 'rectangle':
                        activeProps.push('prop-right-angles', 'prop-equal-diagonals');
                        break;
                    case 'rhombus':
                        activeProps.push('prop-equal-sides');
                        break;
                    case 'square':
                        activeProps.push('prop-right-angles', 'prop-equal-sides', 'prop-equal-diagonals');
                        break;
                }

                activeProps.forEach(propId => {
                    document.getElementById(propId).classList.add('active');
                });
            }

            switchTutorialTab(tabName) {
                // Update tab buttons
                document.querySelectorAll('.tutorial-tab').forEach(tab => tab.classList.remove('active'));
                document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

                // Update content
                document.querySelectorAll('.tutorial-content').forEach(content => content.classList.remove('active'));
                document.getElementById(`${tabName}-content`).classList.add('active');
            }

            startDragging(vertex, event) {
                this.isDragging = true;
                this.dragVertex = vertex;
                event.preventDefault();
            }

            handleDrag(event) {
                if (!this.isDragging || !this.dragVertex) return;

                const svg = document.getElementById('shape-svg');
                const rect = svg.getBoundingClientRect();
                const x = event.clientX - rect.left;
                const y = event.clientY - rect.top;

                // Convert to SVG coordinates
                const svgX = (x / rect.width) * 500;
                const svgY = (y / rect.height) * 400;

                // Update vertex position (simplified for demo)
                const vertex = document.querySelector(`[data-vertex="${this.dragVertex}"]`);
                vertex.setAttribute('cx', svgX);
                vertex.setAttribute('cy', svgY);

                // Update calculations based on new position
                this.calculateFromDrag();
            }

            stopDragging() {
                this.isDragging = false;
                this.dragVertex = null;
            }

            calculateFromDrag() {
                // Simplified calculation update for dragging
                this.updateCalculations();
            }
        }

        // Initialize the calculator
        const calculator = new ParallelogramCalculator();

        // Make it globally accessible
        window.ParallelogramCalculator = calculator;
    </script>
</body>
</html>
