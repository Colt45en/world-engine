<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Engine Tier 5 - Vortex Lab Engine</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            min-height: 100vh;
            color: white;
        }

        .header {
            text-align: center;
            padding: 40px 20px;
            background: rgba(0,0,0,0.3);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .environment-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .card h3 {
            margin-bottom: 20px;
            font-size: 1.3em;
            text-align: center;
        }

        .state-display {
            margin-bottom: 15px;
        }

        .state-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .state-bar {
            height: 25px;
            background: rgba(255,255,255,0.2);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }

        .state-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ecdc4, #45b7d1);
            border-radius: 12px;
            transition: width 0.5s ease;
            position: relative;
        }

        .mu-display {
            text-align: center;
            font-size: 1.5em;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }

        .operator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .operator-btn {
            padding: 15px 10px;
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 0.9em;
        }

        .operator-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .operator-btn:active {
            transform: translateY(0);
        }

        .word-input {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .word-input input {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: rgba(255,255,255,0.2);
            color: white;
            font-size: 1em;
        }

        .word-input input::placeholder {
            color: rgba(255,255,255,0.7);
        }

        .word-input button {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            background: #4ecdc4;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .word-input button:hover {
            background: #45b7d1;
        }

        .ide-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .ide-btn {
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: rgba(255,255,255,0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .ide-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .log-container {
            background: rgba(0,0,0,0.4);
            border-radius: 15px;
            padding: 25px;
            max-height: 300px;
            overflow-y: auto;
        }

        .log-entry {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }

        .log-entry.recent {
            opacity: 1;
            background: rgba(255,255,255,0.1);
            padding: 8px 12px;
            border-radius: 5px;
            margin: 5px 0;
        }

        .recommendations {
            margin-top: 15px;
            padding: 15px;
            background: rgba(255,215,0,0.2);
            border-radius: 10px;
            border: 1px solid rgba(255,215,0,0.3);
        }

        .recommendation {
            margin: 8px 0;
            font-size: 0.9em;
        }

        .environment-canvas {
            width: 100%;
            height: 200px;
            background: rgba(0,0,0,0.6);
            border-radius: 10px;
            border: 2px solid rgba(255,255,255,0.2);
            margin: 15px 0;
            position: relative;
            cursor: crosshair;
        }

        .agent-indicator {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #4ecdc4;
            border: 2px solid white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .agent-indicator:hover {
            transform: scale(1.5);
            box-shadow: 0 0 15px #4ecdc4;
        }

        .environment-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }

        .environment-btn {
            padding: 10px;
            border: none;
            border-radius: 8px;
            background: rgba(255,255,255,0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.8em;
        }

        .environment-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-1px);
        }

        .environment-btn.active {
            background: #4ecdc4;
        }

        .nucleus-prompt {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 0.9em;
            margin: 10px 0;
        }

        .nucleus-prompt::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .nucleus-prompt:focus {
            outline: none;
            border-color: #4ecdc4;
            box-shadow: 0 0 10px rgba(78,205,196,0.3);
        }

        .glyph-network {
            position: relative;
            width: 100%;
            height: 300px;
            background: radial-gradient(circle at center, rgba(0,100,150,0.3), rgba(0,20,40,0.8));
            border-radius: 15px;
            overflow: hidden;
            margin: 15px 0;
        }

        .minds-eye {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, #4ecdc4, #45b7d1);
            border-radius: 50%;
            border: 3px solid rgba(255,255,255,0.6);
            animation: pulse 3s ease-in-out infinite;
        }

        .glyph-node {
            position: absolute;
            width: 60px;
            height: 30px;
            background: rgba(78,205,196,0.8);
            border: 1px solid rgba(255,255,255,0.4);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7em;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            animation: oscillate 4s ease-in-out infinite;
        }

        .glyph-node:hover {
            transform: scale(1.2);
            box-shadow: 0 0 20px rgba(78,205,196,0.8);
        }

        .meta-layer-indicator {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(255,215,0,0.2);
            border: 1px solid rgba(255,215,0,0.5);
            border-radius: 8px;
            padding: 5px 10px;
            font-size: 0.7em;
            color: #ffd700;
        }

        @keyframes pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; }
            50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
        }

        @keyframes oscillate {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            25% { transform: translateY(-10px) rotate(2deg); }
            75% { transform: translateY(10px) rotate(-2deg); }
        }

        .vortex-controls {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            margin: 15px 0;
        }

        .vortex-btn {
            padding: 8px;
            border: none;
            border-radius: 6px;
            background: linear-gradient(45deg, #4ecdc4, #45b7d1);
            color: white;
            font-size: 0.8em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .vortex-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(78,205,196,0.4);
        }

        /* Neural Flow Visualization */
        .neural-flow-canvas {
            position: relative;
            width: 100%;
            height: 250px;
            background: linear-gradient(135deg, rgba(20,20,40,0.9), rgba(10,10,20,0.95));
            border-radius: 15px;
            overflow: hidden;
            margin: 15px 0;
            border: 2px solid rgba(78,205,196,0.3);
        }

        .neural-node {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: radial-gradient(circle, #4ecdc4, #45b7d1);
            border: 2px solid rgba(255,255,255,0.4);
            animation: neuralPulse 2s ease-in-out infinite;
            cursor: pointer;
        }

        .neural-connection {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, transparent, #4ecdc4, transparent);
            opacity: 0;
            animation: neuralFlow 3s ease-in-out infinite;
            transform-origin: left center;
        }

        .consciousness-indicator {
            position: absolute;
            top: 10px;
            right: 15px;
            background: rgba(255,215,0,0.2);
            border: 1px solid rgba(255,215,0,0.6);
            border-radius: 20px;
            padding: 8px 15px;
            font-size: 0.8em;
            color: #ffd700;
            animation: consciousnessGlow 4s ease-in-out infinite;
        }

        .pattern-flow {
            position: absolute;
            bottom: 10px;
            left: 10px;
            right: 10px;
            height: 30px;
            background: rgba(78,205,196,0.1);
            border-radius: 15px;
            overflow: hidden;
        }

        .pattern-wave {
            position: absolute;
            top: 0;
            left: -100%;
            width: 200%;
            height: 100%;
            background: linear-gradient(90deg,
                transparent,
                rgba(78,205,196,0.6),
                rgba(69,183,209,0.6),
                transparent);
            animation: patternWave 4s ease-in-out infinite;
        }

        @keyframes neuralPulse {
            0%, 100% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.3); opacity: 1; box-shadow: 0 0 15px rgba(78,205,196,0.8); }
        }

        @keyframes neuralFlow {
            0% { opacity: 0; transform: scaleX(0); }
            50% { opacity: 1; transform: scaleX(1); }
            100% { opacity: 0; transform: scaleX(0); }
        }

        @keyframes consciousnessGlow {
            0%, 100% { box-shadow: 0 0 10px rgba(255,215,0,0.3); }
            50% { box-shadow: 0 0 25px rgba(255,215,0,0.7); }
        }

        @keyframes patternWave {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .quantum-entanglement {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }

        .quantum-field {
            background: radial-gradient(circle at center, rgba(138,43,226,0.2), rgba(75,0,130,0.1));
            border: 1px solid rgba(138,43,226,0.4);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            position: relative;
        }

        .entanglement-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #8a2be2;
            border-radius: 50%;
            animation: quantumSpin 2s linear infinite;
        }

        @keyframes quantumSpin {
            0% { transform: rotate(0deg) translateX(20px) rotate(0deg); }
            100% { transform: rotate(360deg) translateX(20px) rotate(-360deg); }
        }

        /* 3D Studio Interface */
        .studio-canvas {
            position: relative;
            width: 100%;
            height: 400px;
            background: linear-gradient(135deg, rgba(10,10,30,0.95), rgba(20,20,50,0.9));
            border-radius: 15px;
            overflow: hidden;
            margin: 15px 0;
            border: 2px solid rgba(78,205,196,0.3);
            cursor: grab;
        }

        .studio-canvas:active {
            cursor: grabbing;
        }

        .studio-hud {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(0,0,0,0.7);
            border: 1px solid rgba(78,205,196,0.5);
            border-radius: 8px;
            padding: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.8em;
            color: #4ecdc4;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .studio-hud.active {
            opacity: 1;
        }

        .sonic-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, rgba(138,43,226,0.2), transparent);
            border-radius: 15px;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .sonic-overlay.active {
            opacity: 1;
            animation: sonicPulse 2s ease-in-out infinite;
        }

        @keyframes sonicPulse {
            0%, 100% { transform: scale(1); opacity: 0.6; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }

        .studio-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }

        .studio-btn {
            padding: 12px 15px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(45deg, #2c3e50, #34495e);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            position: relative;
        }

        .studio-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52,73,94,0.4);
            background: linear-gradient(45deg, #34495e, #2c3e50);
        }

        .studio-btn.active {
            background: linear-gradient(45deg, #4ecdc4, #45b7d1);
        }

        .studio-btn::before {
            content: attr(data-key);
            position: absolute;
            top: -8px;
            right: -8px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.7em;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.7;
        }

        .scene-toggle {
            display: flex;
            gap: 5px;
            margin: 10px 0;
        }

        .scene-tab {
            flex: 1;
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            background: rgba(255,255,255,0.1);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.8em;
        }

        .scene-tab.active {
            background: #4ecdc4;
            color: #000;
        }

        .scene-tab:hover:not(.active) {
            background: rgba(255,255,255,0.2);
        }

        .export-modal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            border: 2px solid #4ecdc4;
            border-radius: 10px;
            padding: 20px;
            min-width: 300px;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .export-modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .studio-placeholder {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            opacity: 0.6;
            font-size: 1.1em;
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }

            .environment-grid {
                grid-template-columns: 1fr;
            }

            .operator-grid {
                grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            }

            .ide-controls {
                grid-template-columns: 1fr;
            }

            .environment-controls {
                grid-template-columns: 1fr;
            }

            .vortex-controls {
                grid-template-columns: 1fr 1fr;
            }

            .quantum-entanglement {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>� World Engine Tier 5</h1>
        <p>Vortex Lab Engine with Mind's Eye Processing & Glyph Network Oscillation</p>
    </div>

    <div class="main-container">
        <div class="grid">
            <!-- State Display -->
            <div class="card">
                <h3>🎯 State Vector [p,i,g,c]</h3>

                <div class="state-display">
                    <div class="state-label">
                        <span>Polarity (p)</span>
                        <span id="p-value">0.000</span>
                    </div>
                    <div class="state-bar">
                        <div class="state-fill" id="p-bar" style="width: 50%"></div>
                    </div>
                </div>

                <div class="state-display">
                    <div class="state-label">
                        <span>Intensity (i)</span>
                        <span id="i-value">0.500</span>
                    </div>
                    <div class="state-bar">
                        <div class="state-fill" id="i-bar" style="width: 20%"></div>
                    </div>
                </div>

                <div class="state-display">
                    <div class="state-label">
                        <span>Generality (g)</span>
                        <span id="g-value">0.300</span>
                    </div>
                    <div class="state-bar">
                        <div class="state-fill" id="g-bar" style="width: 12%"></div>
                    </div>
                </div>

                <div class="state-display">
                    <div class="state-label">
                        <span>Confidence (c)</span>
                        <span id="c-value">0.600</span>
                    </div>
                    <div class="state-bar">
                        <div class="state-fill" id="c-bar" style="width: 60%"></div>
                    </div>
                </div>

                <div class="mu-display">
                    μ (Stack Height): <span id="mu-display">1.400</span>
                </div>
            </div>

            <!-- Operators -->
            <div class="card">
                <h3>⚡ Operators</h3>
                <div class="operator-grid" id="operator-grid">
                    <!-- Operators will be populated by JavaScript -->
                </div>

                <div class="word-input">
                    <input type="text" id="word-input" placeholder="e.g., 'rebuild component structure'">
                    <button onclick="try { handleWordInput(); } catch(e) { console.error(\'Button error:\', e); }">Parse</button>
                </div>
            </div>

            <!-- IDE Simulation -->
            <div class="card">
                <h3>💻 IDE Simulation</h3>
                <div class="ide-controls">
                    <button class="ide-btn" onclick="try { simulateBuildSuccess(); } catch(e) { console.error(\'Button error:\', e); }">✅ Build Success</button>
                    <button class="ide-btn" onclick="try { simulateBuildError(); } catch(e) { console.error(\'Button error:\', e); }">❌ Build Error</button>
                    <button class="ide-btn" onclick="try { simulateTestPass(); } catch(e) { console.error(\'Button error:\', e); }">🧪 Tests Pass</button>
                    <button class="ide-btn" onclick="try { simulateTestFail(); } catch(e) { console.error(\'Button error:\', e); }">🧪 Tests Fail</button>
                </div>

                <div id="recommendations-container"></div>
            </div>
        </div>

        <!-- NUCLEUS Environment Creation -->
        <div class="environment-grid">
            <div class="card">
                <h3>🌍 Environment Generator</h3>
                <textarea class="nucleus-prompt" id="environment-prompt" placeholder="Tell NUCLEUS what kind of environment to create...
e.g., 'Create a forest where agents learn cooperation through resource sharing'"></textarea>

                <div class="environment-controls">
                    <button class="environment-btn" onclick="try { generateEnvironment(); } catch(e) { console.error(\'Button error:\', e); }">🎯 Generate</button>
                    <button class="environment-btn" onclick="try { clearEnvironment(); } catch(e) { console.error(\'Button error:\', e); }">🧹 Clear</button>
                    <button class="environment-btn" onclick="try { spawnAgent(); } catch(e) { console.error(\'Button error:\', e); }">🤖 Spawn Agent</button>
                    <button class="environment-btn" onclick="try { enterEnvironment(); } catch(e) { console.error(\'Button error:\', e); }">👤 Join Environment</button>
                </div>

                <div class="environment-canvas" id="environment-canvas">
                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); opacity: 0.5; text-align: center;">
                        <div>🌱 Environment Canvas</div>
                        <div style="font-size: 0.8em; margin-top: 5px;">Agents and humans interact here</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>🧠 Agent Training Hub</h3>

                <div class="state-display">
                    <div class="state-label">
                        <span>Active Agents</span>
                        <span id="agent-count">0</span>
                    </div>
                    <div class="state-bar">
                        <div class="state-fill" id="agent-bar" style="width: 0%"></div>
                    </div>
                </div>

                <div class="state-display">
                    <div class="state-label">
                        <span>Human Interactions</span>
                        <span id="interaction-count">0</span>
                    </div>
                    <div class="state-bar">
                        <div class="state-fill" id="interaction-bar" style="width: 0%"></div>
                    </div>
                </div>

                <div class="state-display">
                    <div class="state-label">
                        <span>Learning Progress</span>
                        <span id="learning-progress">0%</span>
                    </div>
                    <div class="state-bar">
                        <div class="state-fill" id="learning-bar" style="width: 0%"></div>
                    </div>
                </div>

                <div class="mu-display">
                    🎯 Environment Effectiveness: <span id="environment-effectiveness">Awaiting Data</span>
                </div>

                <div class="environment-controls">
                    <button class="environment-btn" onclick="try { pauseTraining(); } catch(e) { console.error(\'Button error:\', e); }">⏸️ Pause Training</button>
                    <button class="environment-btn" onclick="try { resetTraining(); } catch(e) { console.error(\'Button error:\', e); }">🔄 Reset Training</button>
                </div>
            </div>
        </div>

        <!-- Vortex Lab Engine - Tier 5 -->
        <div class="card">
            <h3>🌀 Vortex Lab Engine</h3>

            <div class="glyph-network" id="glyph-network">
                <div class="minds-eye" id="minds-eye" title="Mind's Eye - Central Processing Core"></div>
                <div class="meta-layer-indicator">META LAYER ACTIVE</div>
                <!-- Glyph nodes will be dynamically generated -->
            </div>

            <div class="vortex-controls">
                <button class="vortex-btn" onclick="try { activateMindsEye(); } catch(e) { console.error(\'Button error:\', e); }">👁️ Mind's Eye</button>
                <button class="vortex-btn" onclick="try { oscillateGlyphs(); } catch(e) { console.error(\'Button error:\', e); }">🔄 Oscillate</button>
                <button class="vortex-btn" onclick="try { atomicDecomposition(); } catch(e) { console.error(\'Button error:\', e); }">⚛️ Decompose</button>
                <button class="vortex-btn" onclick="try { metaProcessing(); } catch(e) { console.error(\'Button error:\', e); }">🧠 Meta Layer</button>
                <button class="vortex-btn" onclick="try { dataOptimizer(); } catch(e) { console.error(\'Button error:\', e); }">📊 Optimize</button>
                <button class="vortex-btn" onclick="try { librarian(); } catch(e) { console.error(\'Button error:\', e); }">📚 Librarian</button>
            </div>

            <div class="mu-display">
                🌪️ Vortex Intensity: <span id="vortex-intensity">Initializing...</span>
            </div>
        </div>

        <!-- Neural Flow Consciousness Monitor -->
        <div class="card">
            <h3>🧠 Neural Flow & Consciousness Monitor</h3>

            <div class="neural-flow-canvas" id="neural-flow-canvas">
                <div class="consciousness-indicator" id="consciousness-indicator">
                    Consciousness Level: Emerging
                </div>
                <div class="pattern-flow">
                    <div class="pattern-wave"></div>
                </div>
            </div>

            <div class="quantum-entanglement">
                <div class="quantum-field" id="quantum-field-1">
                    <strong>Agent Quantum Field</strong>
                    <div>Entangled Agents: <span id="entangled-agents">0</span></div>
                    <div class="entanglement-particle" style="top: 20%; left: 30%;"></div>
                    <div class="entanglement-particle" style="top: 60%; right: 25%;"></div>
                </div>
                <div class="quantum-field" id="quantum-field-2">
                    <strong>Environment Field</strong>
                    <div>Synchronized Realities: <span id="sync-realities">0</span></div>
                    <div class="entanglement-particle" style="top: 40%; left: 40%;"></div>
                    <div class="entanglement-particle" style="bottom: 30%; right: 30%;"></div>
                </div>
            </div>

            <div class="vortex-controls">
                <button class="vortex-btn" onclick="try { mapNeuralFlow(); } catch(e) { console.error(\'Button error:\', e); }">🔬 Map Flow</button>
                <button class="vortex-btn" onclick="try { quantumEntangle(); } catch(e) { console.error(\'Button error:\', e); }">⚛️ Entangle</button>
                <button class="vortex-btn" onclick="try { emergenceDetector(); } catch(e) { console.error(\'Button error:\', e); }">🌟 Emergence</button>
                <button class="vortex-btn" onclick="try { createMultiverse(); } catch(e) { console.error(\'Button error:\', e); }">🌌 Multiverse</button>
            </div>
        </div>

        <!-- 3D Studio Interface -->
        <div class="card">
            <h3>🎬 Visual Studio Interface</h3>

            <div class="scene-toggle">
                <button class="scene-tab active" onclick="switchStudioScene('main')" data-scene="main">Main Scene</button>
                <button class="scene-tab" onclick="switchStudioScene('avatar')" data-scene="avatar">Avatar</button>
                <button class="scene-tab" onclick="switchStudioScene('codex')" data-scene="codex">Codex</button>
                <button class="scene-tab" onclick="switchStudioScene('impostor')" data-scene="impostor">Multi-View</button>
            </div>

            <div class="studio-canvas" id="studio-canvas">
                <div class="studio-hud" id="studio-hud">
                    <div>Camera: Orbit Mode</div>
                    <div>Renderer: ACES + sRGB</div>
                    <div>Scene: <span id="current-scene">Main</span></div>
                    <div>Objects: <span id="object-count">0</span></div>
                </div>

                <div class="sonic-overlay" id="sonic-overlay"></div>

                <div class="studio-placeholder">
                    <div>🎭 3D Studio Canvas</div>
                    <div style="font-size: 0.8em; margin-top: 10px; opacity: 0.8;">
                        Drag to orbit • Scroll to zoom<br/>
                        Press H for HUD • Space for Sonic overlay
                    </div>
                </div>

                <div class="export-modal" id="export-modal">
                    <h4>Export 3D Scene</h4>
                    <div style="margin: 15px 0;">
                        <button class="studio-btn" onclick="try { exportGLB(); } catch(e) { console.error(\'Button error:\', e); }">📦 Export GLB</button>
                        <button class="studio-btn" onclick="try { exportOBJ(); } catch(e) { console.error(\'Button error:\', e); }">📐 Export OBJ</button>
                    </div>
                    <button onclick="try { closeExportModal(); } catch(e) { console.error(\'Button error:\', e); }" style="margin-top: 10px;">Close</button>
                </div>
            </div>

            <div class="studio-controls">
                <button class="studio-btn" onclick="try { toggleHUD(); } catch(e) { console.error(\'Button error:\', e); }" data-key="H">
                    📊 Toggle HUD
                </button>
                <button class="studio-btn" onclick="try { toggleSonicOverlay(); } catch(e) { console.error(\'Button error:\', e); }" data-key="Space">
                    🔊 Sonic Overlay
                </button>
                <button class="studio-btn" onclick="try { openExportModal(); } catch(e) { console.error(\'Button error:\', e); }" data-key="G/O">
                    💾 Export Scene
                </button>
                <button class="studio-btn" onclick="try { resetStudioView(); } catch(e) { console.error(\'Button error:\', e); }">
                    🔄 Reset View
                </button>
            </div>

            <div class="mu-display">
                🎬 Studio Status: <span id="studio-status">Ready</span>
            </div>
        </div>

        <!-- Event Log -->
        <div class="card">
            <h3>📝 Event Log</h3>
            <div class="log-container" id="event-log">
                <!-- Log entries will be added here -->
            </div>
        </div>
    </div>

    <script src="world_engine_tier4_demo.js">
            function applyOperator(operator) {
                console.log('Applying operator:', operator);
                if (typeof worldEngine !== 'undefined' && worldEngine.applyOperator) {
                    worldEngine.applyOperator(operator);
                } else if (typeof bridge !== 'undefined' && bridge.applyOperator) {
                    bridge.applyOperator(operator);
                }
            }
            </script>
    <script src="dashboard-nav.js">
            function applyOperator(operator) {
                console.log('Applying operator:', operator);
                if (typeof worldEngine !== 'undefined' && worldEngine.applyOperator) {
                    worldEngine.applyOperator(operator);
                } else if (typeof bridge !== 'undefined' && bridge.applyOperator) {
                    bridge.applyOperator(operator);
                }
            }
            </script>
    <script>
        // Initialize dashboard navigation
        let dashboardNav;
        document.addEventListener('DOMContentLoaded', () => {
            const relatedDashboards = [
                { name: 'Glyph Forge', url: 'glyph_forge.html', icon: '⚡' },
                { name: 'Lexical Logic Engine', url: 'lexical-logic-engine.html', icon: '🔤' },
                { name: 'Quantum Graphics', url: 'quantum_graphics_demo.html', icon: '🌊' },
                { name: 'NEXUS Holy Beat', url: 'http://localhost:8000/demo', icon: '🎵' }
            ];

            dashboardNav = initDashboardNav(
                'World Engine Tier 5',
                'world-engine',
                relatedDashboards
            );
        });

        // Global functions for button clicks
        function handleWordInput() {
            if (window.demo) {
                window.demo.handleWordInput();
            }
        }

        function simulateBuildSuccess() {
            if (window.demo) {
                window.demo.simulateBuildSuccess();
            }
        }

        function simulateBuildError() {
            if (window.demo) {
                window.demo.simulateBuildError();
            }
        }

        function simulateTestPass() {
            if (window.demo) {
                window.demo.simulateTestPass();
            }
        }

        function simulateTestFail() {
            if (window.demo) {
                window.demo.simulateTestFail();
            }
        }

        // NUCLEUS Environment Functions
        function generateEnvironment() {
            const prompt = document.getElementById('environment-prompt').value;
            if (prompt.trim()) {
                if (window.demo) {
                    window.demo.generateEnvironment(prompt);
                }
                logEnvironmentEvent(`🌍 NUCLEUS generating: "${prompt}"`);
            }
        }

        function clearEnvironment() {
            if (window.demo) {
                window.demo.clearEnvironment();
            }
            logEnvironmentEvent("🧹 Environment cleared by user");
        }

        function spawnAgent() {
            if (window.demo) {
                window.demo.spawnAgent();
            }
            logEnvironmentEvent("🤖 New agent spawned for training");
        }

        function enterEnvironment() {
            if (window.demo) {
                window.demo.enterEnvironment();
            }
            logEnvironmentEvent("👤 Human entered environment for interaction");
        }

        function pauseTraining() {
            if (window.demo) {
                window.demo.pauseTraining();
            }
            logEnvironmentEvent("⏸️ Training paused");
        }

        function resetTraining() {
            if (window.demo) {
                window.demo.resetTraining();
            }
            logEnvironmentEvent("🔄 Training progress reset");
        }

        function logEnvironmentEvent(message) {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}`;

            const logContainer = document.getElementById('event-log');
            if (logContainer) {
                const entry = document.createElement('div');
                entry.className = 'log-entry recent';
                entry.textContent = logEntry;
                logContainer.appendChild(entry);
                logContainer.scrollTop = logContainer.scrollHeight;
            }
        }

        // Vortex Lab Engine - Tier 5 Functions
        function activateMindsEye() {
            if (window.demo) {
                window.demo.activateMindsEye();
            }
            logEnvironmentEvent("👁️ Mind's Eye processing activated");
        }

        function oscillateGlyphs() {
            if (window.demo) {
                window.demo.oscillateGlyphs();
            }
            logEnvironmentEvent("🔄 Glyph network oscillation initiated");
        }

        function atomicDecomposition() {
            if (window.demo) {
                window.demo.atomicDecomposition();
            }
            logEnvironmentEvent("⚛️ Atomic decomposition process started");
        }

        function metaProcessing() {
            if (window.demo) {
                window.demo.metaProcessing();
            }
            logEnvironmentEvent("🧠 Meta-layer processing engaged");
        }

        function dataOptimizer() {
            if (window.demo) {
                window.demo.dataOptimizer();
            }
            logEnvironmentEvent("📊 Data optimizer running analysis");
        }

        function librarian() {
            if (window.demo) {
                window.demo.librarian();
            }
            logEnvironmentEvent("📚 Librarian system organizing data structures");
        }

        // Neural Flow & Consciousness Functions
        function mapNeuralFlow() {
            if (window.demo) {
                window.demo.mapNeuralFlow();
            }
            logEnvironmentEvent("🔬 Neural flow mapping initiated - consciousness patterns analyzed");
        }

        function quantumEntangle() {
            if (window.demo) {
                window.demo.quantumEntangle();
            }
            logEnvironmentEvent("⚛️ Quantum entanglement established between agents and environments");
        }

        function emergenceDetector() {
            if (window.demo) {
                window.demo.emergenceDetector();
            }
            logEnvironmentEvent("🌟 Consciousness emergence detector activated - scanning for self-awareness");
        }

        function createMultiverse() {
            if (window.demo) {
                window.demo.createMultiverse();
            }
            logEnvironmentEvent("🌌 Multiversal environment branches created - parallel realities active");
        }

        // 3D Studio Interface Functions
        let currentStudioScene = 'main';
        let hudVisible = false;
        let sonicOverlayActive = false;

        function switchStudioScene(sceneType) {
            currentStudioScene = sceneType;

            // Update UI
            document.querySelectorAll('.scene-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-scene="${sceneType}"]`).classList.add('active');

            document.getElementById('current-scene').textContent = sceneType.charAt(0).toUpperCase() + sceneType.slice(1);

            if (window.demo) {
                window.demo.switchStudioScene(sceneType);
            }

            logEnvironmentEvent(`🎬 Studio scene switched to: ${sceneType}`);
            updateStudioStatus(`Scene: ${sceneType} loaded`);
        }

        function toggleHUD() {
            hudVisible = !hudVisible;
            const hud = document.getElementById('studio-hud');
            if (hud) {
                hud.classList.toggle('active', hudVisible);
            }

            if (window.demo) {
                window.demo.toggleHUD(hudVisible);
            }

            logEnvironmentEvent(`📊 Studio HUD ${hudVisible ? 'enabled' : 'disabled'}`);
            updateStudioStatus(hudVisible ? 'HUD Active' : 'HUD Hidden');
        }

        function toggleSonicOverlay() {
            sonicOverlayActive = !sonicOverlayActive;
            const overlay = document.getElementById('sonic-overlay');
            if (overlay) {
                overlay.classList.toggle('active', sonicOverlayActive);
            }

            if (window.demo) {
                window.demo.toggleSonicOverlay(sonicOverlayActive);
            }

            logEnvironmentEvent(`🔊 Sonic overlay ${sonicOverlayActive ? 'activated' : 'deactivated'}`);
            updateStudioStatus(sonicOverlayActive ? 'Sonic Mode' : 'Visual Mode');
        }

        function openExportModal() {
            const modal = document.getElementById('export-modal');
            if (modal) {
                modal.classList.add('active');
            }
            logEnvironmentEvent("💾 Export modal opened");
        }

        function closeExportModal() {
            const modal = document.getElementById('export-modal');
            if (modal) {
                modal.classList.remove('active');
            }
        }

        function exportGLB() {
            if (window.demo) {
                window.demo.exportGLB();
            }
            logEnvironmentEvent("📦 GLB export initiated - 3D scene packaged");
            updateStudioStatus("Exporting GLB...");

            // Simulate export process
            setTimeout(() => {
                updateStudioStatus("GLB Export Complete");
                closeExportModal();
            }, 2000);
        }

        function exportOBJ() {
            if (window.demo) {
                window.demo.exportOBJ();
            }
            logEnvironmentEvent("📐 OBJ export initiated - geometry exported");
            updateStudioStatus("Exporting OBJ...");

            // Simulate export process
            setTimeout(() => {
                updateStudioStatus("OBJ Export Complete");
                closeExportModal();
            }, 2000);
        }

        function resetStudioView() {
            if (window.demo) {
                window.demo.resetStudioView();
            }
            logEnvironmentEvent("🔄 Studio view reset to default position");
            updateStudioStatus("View Reset");
        }

        function updateStudioStatus(status) {
            const statusEl = document.getElementById('studio-status');
            if (statusEl) {
                statusEl.textContent = status;
            }

            // Reset to "Ready" after 3 seconds
            setTimeout(() => {
                if (statusEl && statusEl.textContent === status) {
                    statusEl.textContent = "Ready";
                }
            }, 3000);
        }

        // Enhanced keyboard shortcuts including studio controls
        document.addEventListener('keydown', function(event) {
            // Studio shortcuts (without modifiers)
            if (!event.ctrlKey && !event.metaKey && !event.altKey) {
                switch(event.key.toLowerCase()) {
                    case 'h':
                        event.preventDefault();
                        toggleHUD();
                        break;
                    case ' ': // Space bar
                        event.preventDefault();
                        toggleSonicOverlay();
                        break;
                    case 'g':
                        event.preventDefault();
                        exportGLB();
                        break;
                    case 'o':
                        event.preventDefault();
                        exportOBJ();
                        break;
                }
            }

            // Original operator shortcuts
            if (event.ctrlKey || event.metaKey) {
                switch(event.key) {
                    case 's': // Ctrl+S -> ST (snapshot)
                        event.preventDefault();
                        if (window.demo) window.demo.applyOperator('ST');
                        break;
                    case 'z': // Ctrl+Z -> RST (restore)
                        event.preventDefault();
                        if (window.demo) window.demo.applyOperator('RST');
                        break;
                    case 'r': // Ctrl+R -> RB (rebuild)
                        event.preventDefault();
                        if (window.demo) window.demo.applyOperator('RB');
                        break;
                }
            }
        });

        // Add word input enter key support
        document.addEventListener('DOMContentLoaded', function() {
            const wordInput = document.getElementById('word-input');
            if (wordInput) {
                wordInput.addEventListener('keypress', function(event) {
                    if (event.key === 'Enter') {
                        handleWordInput();
                    }
                });
            }
        });
    
            function applyOperator(operator) {
                console.log('Applying operator:', operator);
                if (typeof worldEngine !== 'undefined' && worldEngine.applyOperator) {
                    worldEngine.applyOperator(operator);
                } else if (typeof bridge !== 'undefined' && bridge.applyOperator) {
                    bridge.applyOperator(operator);
                }
            }
            </script>
</body>
</html>
