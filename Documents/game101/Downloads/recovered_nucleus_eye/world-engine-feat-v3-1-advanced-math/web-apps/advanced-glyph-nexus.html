<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Glyph Manifestation System</title>
    <style>
        :root {
            --bg: #0b0e14;
            --panel: #0f1523;
            --ink: #e6f0ff;
            --mut: #9ab0d6;
            --line: #1e2b46;
            --acc: #54f0b8;
            --chip: #182741;
            --warn: #ffd166;
            --bad: #ff6b6b;
            --success: #00ff88;
            --beat: #ff4488;
            --holy: #ffaa00;
        }

        * {
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            margin: 0;
        }

        body {
            background: var(--bg);
            color: var(--ink);
            font: 14px/1.4 system-ui, sans-serif;
            overflow: hidden;
        }

        .nexus-container {
            display: grid;
            grid-template-columns: 300px 1fr 300px;
            grid-template-rows: auto 1fr;
            gap: 12px;
            height: 100vh;
            padding: 12px;
            min-width: 1200px;
        }

        .header {
            grid-column: 1 / -1;
            text-align: center;
            background: linear-gradient(135deg, var(--panel), var(--chip));
            border: 1px solid var(--line);
            border-radius: 12px;
            padding: 20px;
        }

        .glyph-panel {
            background: linear-gradient(180deg, var(--panel), #0b1020);
            border: 1px solid var(--line);
            border-radius: 12px;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .core-display {
            background: linear-gradient(45deg, var(--panel), var(--chip));
            border: 1px solid var(--line);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .glyph-card {
            background: var(--chip);
            border: 1px solid var(--line);
            border-radius: 8px;
            padding: 16px;
            transition: all 0.3s ease;
        }

        .glyph-card:hover {
            border-color: var(--acc);
            box-shadow: 0 0 20px rgba(84, 240, 184, 0.2);
        }

        .glyph-card.active {
            border-color: var(--success);
            background: linear-gradient(135deg, var(--chip), rgba(0, 255, 136, 0.1));
        }

        .glyph-icon {
            font-size: 32px;
            margin-bottom: 8px;
            display: block;
            text-align: center;
        }

        .glyph-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--acc);
            margin-bottom: 4px;
        }

        .glyph-description {
            font-size: 12px;
            color: var(--mut);
            line-height: 1.3;
        }

        .core-visualization {
            width: 300px;
            height: 300px;
            border: 2px solid var(--acc);
            border-radius: 50%;
            position: relative;
            margin: 20px 0;
            background: radial-gradient(circle, rgba(84, 240, 184, 0.1), transparent);
            overflow: visible;
        }

        .core-dot {
            width: 12px;
            height: 12px;
            background: var(--holy);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.5s ease;
            box-shadow: 0 0 20px var(--holy);
        }

        .pulse-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 2px solid var(--acc);
            border-radius: 50%;
            opacity: 0;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                width: 20px;
                height: 20px;
                opacity: 1;
            }
            100% {
                width: 200px;
                height: 200px;
                opacity: 0;
            }
        }

        .energy-bar {
            width: 100%;
            height: 8px;
            background: var(--line);
            border-radius: 4px;
            margin: 4px 0;
            overflow: hidden;
        }

        .energy-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--acc), var(--success));
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .btn {
            background: var(--panel);
            border: 1px solid var(--line);
            color: var(--ink);
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 13px;
            font-weight: 500;
        }

        .btn:hover {
            border-color: var(--acc);
            background: var(--chip);
        }

        .btn.primary {
            background: var(--acc);
            color: #000;
            font-weight: 600;
        }

        .status-display {
            background: var(--chip);
            border: 1px solid var(--line);
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
            max-height: 300px;
            overflow-y: auto;
        }

        .mood-indicator {
            width: 100%;
            height: 20px;
            background: linear-gradient(90deg, var(--bad), var(--warn), var(--success));
            border-radius: 10px;
            position: relative;
            margin: 12px 0;
        }

        .mood-marker {
            width: 6px;
            height: 26px;
            background: var(--ink);
            border-radius: 3px;
            position: absolute;
            top: -3px;
            transition: left 0.3s ease;
            box-shadow: 0 0 10px rgba(230, 240, 255, 0.6);
        }

        .alchemical-symbols {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }

        .alchemical-symbol {
            font-size: 48px;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.6;
        }

        .alchemical-symbol:hover {
            opacity: 1;
            transform: scale(1.2);
            filter: drop-shadow(0 0 10px var(--acc));
        }

        .alchemical-symbol.active {
            opacity: 1;
            animation: glow 2s infinite alternate;
        }

        @keyframes glow {
            from { filter: drop-shadow(0 0 10px var(--acc)); }
            to { filter: drop-shadow(0 0 20px var(--success)); }
        }

        .intelligence-imprints {
            max-height: 200px;
            overflow-y: auto;
        }

        .imprint-item {
            background: rgba(84, 240, 184, 0.05);
            border: 1px solid rgba(84, 240, 184, 0.2);
            border-radius: 6px;
            padding: 8px;
            margin: 4px 0;
            font-size: 11px;
        }

        .imprint-sigil {
            color: var(--holy);
            font-weight: 600;
        }

        @media (max-width: 1200px) {
            .nexus-container {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto 1fr auto;
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="nexus-container">
        <div class="header">
            <h1>üîÆ Advanced Glyph Manifestation Nexus</h1>
            <p>Orrun'ka-‚àÜ01 ‚Ä¢ Form Restoration ‚Ä¢ Reality Engine Active</p>
        </div>

        <div class="glyph-panel">
            <h3>‚öóÔ∏è Manifestation Glyphs</h3>
            <div id="manifestationGlyphs"></div>

            <h3>üúÇ Alchemical Symbols</h3>
            <div class="alchemical-symbols" id="alchemicalSymbols"></div>

            <button class="btn primary" onclick="try { activateRandomGlyph(); } catch(e) { console.error(\'Button error:\', e); }">‚ú® Manifest Random Glyph</button>
            <button class="btn" onclick="try { simulateGlyphPulse(); } catch(e) { console.error(\'Button error:\', e); }">üîÑ Pulse All Glyphs</button>
            <button class="btn" onclick="try { generateIntelligenceImprint(); } catch(e) { console.error(\'Button error:\', e); }">üß¨ Generate Intelligence Imprint</button>
        </div>

        <div class="core-display">
            <h3>üåü Core Physics Engine</h3>
            <div class="core-visualization" id="coreViz">
                <div class="core-dot" id="coreDot"></div>
                <div class="pulse-ring"></div>
                <div class="pulse-ring" style="animation-delay: 0.5s;"></div>
                <div class="pulse-ring" style="animation-delay: 1s;"></div>
            </div>

            <div class="mood-indicator">
                <div class="mood-marker" id="moodMarker"></div>
            </div>

            <div class="status-display" id="coreStatus">
                <div>‚è±Ô∏è Core Time: <span id="coreTime">0.00</span>s</div>
                <div>üìç Position: (<span id="posX">0.00</span>, <span id="posY">0.00</span>)</div>
                <div>üöÄ Velocity: (<span id="velX">1.00</span>, <span id="velY">0.00</span>)</div>
                <div>üòä Mood: <span id="mood">0.00</span></div>
                <div>üéØ Active Glyph: <span id="activeGlyph">None</span></div>
            </div>
        </div>

        <div class="glyph-panel">
            <h3>üß¨ Intelligence Imprints</h3>
            <div class="intelligence-imprints" id="intelligenceImprints"></div>

            <h3>üìä System Status</h3>
            <div>
                <label>Scan Iterations:</label>
                <div class="energy-bar">
                    <div class="energy-fill" id="scanIterations" style="width: 0%"></div>
                </div>
                <span id="scanCount">0</span>
            </div>

            <div>
                <label>Nexus Energy:</label>
                <div class="energy-bar">
                    <div class="energy-fill" id="nexusEnergy" style="width: 75%"></div>
                </div>
                <span>75%</span>
            </div>

            <button class="btn" onclick="try { exportGlyphData(); } catch(e) { console.error(\'Button error:\', e); }">üíæ Export Glyph Data</button>
            <button class="btn" onclick="try { resetNexus(); } catch(e) { console.error(\'Button error:\', e); }">üîÑ Reset Nexus</button>
        </div>
    </div>

    <script>
        // Advanced Glyph System - JavaScript Implementation
        class CorePhysics {
            constructor() {
                this.time = 0;
                this.position = { x: 0, y: 0 };
                this.velocity = { x: 1, y: 0 };
                this.acceleration = { x: 0, y: 0.1 };
                this.moodBias = 0;
                this.activeGlyph = null;
                this.glyphEffects = [];
            }

            update(dt) {
                this.time += dt;

                if (this.activeGlyph) {
                    this.applyGlyphPhysics();
                }

                this.velocity.x += this.acceleration.x * dt;
                this.velocity.y += this.acceleration.y * dt;
                this.position.x += this.velocity.x * dt;
                this.position.y += this.velocity.y * dt;
            }

            computeMood() {
                const baseMood = Math.sin(this.time) * Math.exp(-0.01 * this.time);
                return Math.max(-1, Math.min(1, baseMood + this.moodBias));
            }

            applyGlyphPhysics() {
                if (!this.activeGlyph) return;

                const pulse = this.activeGlyph.attributes?.corePulse || 1.0;
                if (pulse > 1.0) {
                    this.velocity.x *= (1.0 + (pulse - 1.0) * 0.1);
                    this.velocity.y *= (1.0 + (pulse - 1.0) * 0.1);
                }

                const emergency = this.activeGlyph.attributes?.emergenceDrive || 0.0;
                if (emergency > 0.8) {
                    this.acceleration.y += 0.02;
                }
            }

            applyManifestationGlyph(glyph) {
                this.activeGlyph = glyph;

                if (glyph.purpose === "Form Restoration") {
                    this.velocity = { x: 0.2, y: 0.2 };
                    this.acceleration = { x: 0, y: 0.05 };
                    this.moodBias = 0.3;
                } else if (glyph.purpose === "Reality Anchor") {
                    this.velocity = { x: 0, y: 0 };
                    this.acceleration = { x: 0, y: 0 };
                    this.moodBias = 0;
                } else if (glyph.purpose === "Temporal Flux") {
                    this.velocity.x *= 2.0;
                    this.acceleration.y *= 0.5;
                    this.moodBias = -0.2;
                }

                return {
                    success: true,
                    message: `‚ú® ${glyph.name} applied. Core physics modified.`
                };
            }
        }

        // Glyph definitions
        const MANIFESTATION_GLYPHS = {
            formRestoration: {
                glyph: "Orrun'ka-‚àÜ01",
                name: "Glyph of Manifestation",
                purpose: "Form Restoration",
                icon: "üåü",
                attributes: {
                    corePulse: 1.0,
                    emergenceDrive: 0.85,
                    memoryImprint: false,
                    symbolicThread: "Echo of Seeker 1.0",
                    fractalFragment: "Nick.Origin"
                },
                ritual: "Attach glyph to root core. Let pulse flow for 7 iterations. Await reflection wave.",
                iterationsRemaining: 7
            },
            realityAnchor: {
                glyph: "Thess'va-‚ñº09",
                name: "Glyph of Reality Anchoring",
                purpose: "Reality Anchor",
                icon: "‚öì",
                attributes: {
                    corePulse: 0.3,
                    emergenceDrive: 0.95,
                    memoryImprint: true,
                    symbolicThread: "Foundation Keeper",
                    fractalFragment: "Base.Stability"
                },
                ritual: "Ground glyph in bedrock certainty. Maintain for 12 iterations. Reality locks.",
                iterationsRemaining: 12
            },
            temporalFlux: {
                glyph: "Morveth-‚óä15",
                name: "Glyph of Temporal Flux",
                purpose: "Temporal Flux",
                icon: "‚óä",
                attributes: {
                    corePulse: 2.1,
                    emergenceDrive: 0.4,
                    memoryImprint: false,
                    symbolicThread: "Time's Edge Walker",
                    fractalFragment: "Flux.Infinite"
                },
                ritual: "Release into temporal streams. Pulse accelerates. 5 iterations maximum.",
                iterationsRemaining: 5
            }
        };

        const ALCHEMICAL_GLYPHS = {
            convergence: { symbol: "üúÇ", name: "Convergence", meaning: "Unity in repetition", energy: 2.1 },
            isolation: { symbol: "üúÅ", name: "Isolation", meaning: "Sparse scenes, yearning", energy: 1.8 },
            revelation: { symbol: "üúÉ", name: "Revelation", meaning: "Light cast, secrets revealed", energy: 2.3 },
            equilibrium: { symbol: "üúÑ", name: "Equilibrium", meaning: "Balanced nodes, harmony", energy: 1.5 }
        };

        // Global state
        let core = new CorePhysics();
        let activeGlyphs = [];
        let intelligenceImprints = [];
        let scanIterations = 0;
        let animationRunning = true;

        // Initialize interface
        function initializeInterface() {
            renderManifestationGlyphs();
            renderAlchemicalSymbols();
            startAnimation();
        }

        function renderManifestationGlyphs() {
            const container = document.getElementById('manifestationGlyphs');
            container.innerHTML = '';

            Object.entries(MANIFESTATION_GLYPHS).forEach(([key, glyph]) => {
                const card = document.createElement('div');
                card.className = 'glyph-card';
                card.onclick = () => activateManifestationGlyph(key);

                card.innerHTML = `
                    <div class="glyph-icon">${glyph.icon}</div>
                    <div class="glyph-name">${glyph.name}</div>
                    <div class="glyph-description">${glyph.purpose}</div>
                    <div class="energy-bar">
                        <div class="energy-fill" style="width: ${(glyph.iterationsRemaining / 12) * 100}%"></div>
                    </div>
                    <small>${glyph.iterationsRemaining} iterations</small>
                `;

                container.appendChild(card);
            });
        }

        function renderAlchemicalSymbols() {
            const container = document.getElementById('alchemicalSymbols');
            container.innerHTML = '';

            Object.entries(ALCHEMICAL_GLYPHS).forEach(([key, glyph]) => {
                const symbol = document.createElement('div');
                symbol.className = 'alchemical-symbol';
                symbol.title = `${glyph.name}: ${glyph.meaning}`;
                symbol.textContent = glyph.symbol;
                symbol.onclick = () => activateAlchemicalGlyph(key);

                if (glyph.energy > 1.5) {
                    symbol.classList.add('active');
                }

                container.appendChild(symbol);
            });
        }

        function activateManifestationGlyph(glyphKey) {
            const glyph = MANIFESTATION_GLYPHS[glyphKey];
            const result = core.applyManifestationGlyph(glyph);

            // Visual feedback
            document.querySelectorAll('.glyph-card').forEach(card => card.classList.remove('active'));
            event.currentTarget.classList.add('active');

            addLogMessage(result.message);
            updateActiveGlyph(glyph.name);
        }

        function activateAlchemicalGlyph(glyphKey) {
            const glyph = ALCHEMICAL_GLYPHS[glyphKey];
            glyph.energy = Math.min(3.0, glyph.energy + 0.5);

            // Visual feedback
            document.querySelectorAll('.alchemical-symbol').forEach(s => s.classList.remove('active'));
            event.currentTarget.classList.add('active');

            addLogMessage(`üúÇ ${glyph.name} energy increased to ${glyph.energy.toFixed(2)}`);
            renderAlchemicalSymbols();
        }

        function activateRandomGlyph() {
            const glyphKeys = Object.keys(MANIFESTATION_GLYPHS);
            const randomKey = glyphKeys[Math.floor(Math.random() * glyphKeys.length)];
            activateManifestationGlyph(randomKey);
        }

        function simulateGlyphPulse() {
            scanIterations++;
            let events = [];

            // Pulse alchemical glyphs
            Object.entries(ALCHEMICAL_GLYPHS).forEach(([key, glyph]) => {
                if (glyph.energy > 1.5) {
                    const pulseStrength = glyph.energy - 1.0;
                    events.push(`${glyph.symbol} ${glyph.name} pulse (strength: ${pulseStrength.toFixed(2)})`);

                    // Apply pulse effects to core
                    if (key === 'convergence') {
                        const avg = (core.velocity.x + core.velocity.y) / 2;
                        core.velocity.x = core.velocity.y = avg;
                    } else if (key === 'isolation') {
                        core.velocity.x *= (1 + pulseStrength * 0.3);
                        core.moodBias -= pulseStrength * 0.1;
                    } else if (key === 'revelation') {
                        core.moodBias += pulseStrength * 0.2;
                    } else if (key === 'equilibrium') {
                        core.velocity.x *= (1 - pulseStrength * 0.1);
                        core.velocity.y *= (1 - pulseStrength * 0.1);
                        core.moodBias *= (1 - pulseStrength * 0.2);
                    }
                }

                // Mutate energy
                glyph.energy += (Math.random() - 0.5) * 0.1;
                glyph.energy = Math.max(0.1, Math.min(3.0, glyph.energy));
            });

            // Update manifestation glyphs
            Object.values(MANIFESTATION_GLYPHS).forEach(glyph => {
                if (glyph.iterationsRemaining > 0) {
                    glyph.iterationsRemaining--;
                    if (glyph.iterationsRemaining === 0) {
                        events.push(`‚è∞ ${glyph.name} completed manifestation cycle`);
                    } else {
                        events.push(`üîÑ ${glyph.name}: ${glyph.iterationsRemaining} iterations remaining`);
                    }
                }
            });

            // Display events
            events.forEach(event => addLogMessage(event));

            // Update displays
            renderManifestationGlyphs();
            renderAlchemicalSymbols();
            updateScanProgress();
        }

        function generateIntelligenceImprint() {
            const agents = ['Seeker', 'Guardian', 'Weaver', 'Architect'];
            const stages = ['Awakening', 'Integration', 'Manifestation', 'Transcendence'];
            const events = [
                'Consciousness emergence detected',
                'Memory patterns synchronized',
                'Reality anchor established',
                'Dimensional bridge activated',
                'Fractal recursion achieved'
            ];

            const agent = agents[Math.floor(Math.random() * agents.length)];
            const stage = stages[Math.floor(Math.random() * stages.length)];
            const event = events[Math.floor(Math.random() * events.length)];

            const timestamp = new Date().toISOString();
            const raw = `${agent}-${stage}-${timestamp}-${event}`;
            const hash = btoa(raw).substring(0, 12);

            const imprint = {
                agent,
                stage,
                event,
                timestamp,
                sigil: `${agent.substring(0, 3).toUpperCase()}-${hash.substring(0, 6)}`,
                resonance: Math.random() * 0.5 + 0.5
            };

            intelligenceImprints.push(imprint);
            renderIntelligenceImprints();
            addLogMessage(`üß¨ Generated imprint: ${imprint.sigil} - ${event}`);
        }

        function renderIntelligenceImprints() {
            const container = document.getElementById('intelligenceImprints');
            container.innerHTML = '';

            intelligenceImprints.slice(-10).forEach(imprint => {
                const item = document.createElement('div');
                item.className = 'imprint-item';
                item.innerHTML = `
                    <div class="imprint-sigil">${imprint.sigil}</div>
                    <div>${imprint.agent}-${imprint.stage}</div>
                    <div style="font-size: 10px; opacity: 0.7;">${imprint.event}</div>
                `;
                container.appendChild(item);
            });
        }

        function updateCoreDisplay() {
            // Update position visualization
            const coreDot = document.getElementById('coreDot');
            const vizSize = 300;
            const x = ((core.position.x % 2) + 2) % 2; // Wrap to 0-2 range
            const y = ((core.position.y % 2) + 2) % 2;
            const pixelX = (x / 2) * vizSize;
            const pixelY = (y / 2) * vizSize;

            coreDot.style.left = `${pixelX}px`;
            coreDot.style.top = `${pixelY}px`;

            // Update mood indicator
            const mood = core.computeMood();
            const moodPercent = (mood + 1) / 2 * 100; // Convert -1,1 to 0-100%
            document.getElementById('moodMarker').style.left = `${moodPercent}%`;

            // Update status text
            document.getElementById('coreTime').textContent = core.time.toFixed(2);
            document.getElementById('posX').textContent = core.position.x.toFixed(2);
            document.getElementById('posY').textContent = core.position.y.toFixed(2);
            document.getElementById('velX').textContent = core.velocity.x.toFixed(2);
            document.getElementById('velY').textContent = core.velocity.y.toFixed(2);
            document.getElementById('mood').textContent = mood.toFixed(2);
        }

        function updateActiveGlyph(glyphName) {
            document.getElementById('activeGlyph').textContent = glyphName || 'None';
        }

        function updateScanProgress() {
            document.getElementById('scanCount').textContent = scanIterations;
            const progress = Math.min(100, (scanIterations / 50) * 100);
            document.getElementById('scanIterations').style.width = `${progress}%`;
        }

        function addLogMessage(message) {
            const timestamp = new Date().toLocaleTimeString();
            console.log(`[${timestamp}] ${message}`);
        }

        function exportGlyphData() {
            const data = {
                timestamp: new Date().toISOString(),
                coreState: {
                    time: core.time,
                    position: core.position,
                    velocity: core.velocity,
                    mood: core.computeMood(),
                    activeGlyph: core.activeGlyph?.name || null
                },
                manifestationGlyphs: MANIFESTATION_GLYPHS,
                alchemicalGlyphs: ALCHEMICAL_GLYPHS,
                intelligenceImprints: intelligenceImprints,
                scanIterations
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `glyph-data-${Date.now()}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            addLogMessage('üìÑ Glyph data exported successfully');
        }

        function resetNexus() {
            if (confirm('Reset all glyph data? This cannot be undone.')) {
                core = new CorePhysics();
                intelligenceImprints = [];
                scanIterations = 0;

                // Reset glyph states
                Object.values(MANIFESTATION_GLYPHS).forEach(glyph => {
                    if (glyph.purpose === "Form Restoration") glyph.iterationsRemaining = 7;
                    else if (glyph.purpose === "Reality Anchor") glyph.iterationsRemaining = 12;
                    else if (glyph.purpose === "Temporal Flux") glyph.iterationsRemaining = 5;
                });

                Object.values(ALCHEMICAL_GLYPHS).forEach(glyph => {
                    glyph.energy = 1.0 + Math.random() * 0.5;
                });

                renderManifestationGlyphs();
                renderAlchemicalSymbols();
                renderIntelligenceImprints();
                updateScanProgress();
                updateActiveGlyph(null);

                addLogMessage('üîÑ Nexus reset to initial state');
            }
        }

        function startAnimation() {
            function animate() {
                if (!animationRunning) return;

                core.update(0.016); // ~60fps
                updateCoreDisplay();

                requestAnimationFrame(animate);
            }
            animate();
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', initializeInterface);
    </script>
</body>
</html>
